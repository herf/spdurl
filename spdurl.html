<html>
<style>
	body {margin:2em;font-family:Arial;font-size:2em;}
	input {font-size:1em;}
</style>
<body>

<script src='spdurl.js'></script>spdurl

<script>
	// example
	var spd = new SPD();

	spd.base = 380;
	spd.delta = 10;
	spd.date = Math.floor(new Date().valueOf() / 1000);
	spd.data = [1.039693,1.039379,1.039198,1.564554,1.696937,1.583408,1.778512,1.970525,1.930359,1.800388,1.725509,1.659314,1.651000,1.587592,1.506774,1.541956,1.536947,1.536743,1.488346,1.409579,1.326508,1.219819,1.163692,1.117009,1.068008,1.037550,1.015638,0.944459,0.889883,0.855271,0.801936,0.759832,0.904105,1.111251,1.211360,1.453921];

	var enc = encodeSPD(spd);
	console.log(enc);
	console.log(enc.length, "bytes");

	var dec = decodeSPD(enc);
	console.log(dec);

	var relerr = spd.err(dec);

	console.log("relerr", relerr);

	var fl = new SPD();
	fl.base = 350;
	fl.delta = 1;
	fl.data = [0.000656498, 0.000711488, 0.000778145, 0.000808409, 0.000798795, 0.00080284, 0.000856461, 0.000901177, 0.000899662, 0.000945903, 0.00109916, 0.00153053, 0.00244286, 0.00364455, 0.00480335, 0.00563996, 0.00599328, 0.00603012, 0.00591929, 0.00581484, 0.00573595, 0.00567787, 0.00533928, 0.00409953, 0.002547, 0.00144494, 0.0012468, 0.00127878, 0.00137034, 0.00141395, 0.00137472, 0.0014155, 0.00146169, 0.00145189, 0.00146184, 0.001485, 0.00150836, 0.00151593, 0.00152054, 0.00152786, 0.0015476, 0.00160052, 0.00167362, 0.0017566, 0.00183901, 0.00190732, 0.00197366, 0.00205419, 0.00203504, 0.00285477, 0.0068528, 0.0159798, 0.0272048, 0.0359205, 0.0396449, 0.0389719, 0.0371358, 0.0351037, 0.0327297, 0.0296648, 0.0231284, 0.0135877, 0.00721444, 0.00449489, 0.0040345, 0.00354597, 0.00348985, 0.00359608, 0.00367811, 0.00377481, 0.00390012, 0.00406324, 0.00426666, 0.00446612, 0.0046949, 0.00498286, 0.00531945, 0.00569866, 0.00602637, 0.0062919, 0.00761956, 0.0206545, 0.0527624, 0.0966379, 0.130872, 0.146914, 0.15001, 0.14858, 0.144387, 0.133799, 0.0975702, 0.0512991, 0.0135053, 0.00627669, 0.00631847, 0.00641825, 0.00627964, 0.00622234, 0.00619699, 0.00617213, 0.00615134, 0.00613721, 0.00613142, 0.00613474, 0.00614641, 0.00615974, 0.00616267, 0.00612803, 0.00607808, 0.00603838, 0.00603825, 0.00605205, 0.00607938, 0.0061317, 0.00623272, 0.00631803, 0.00634, 0.00635122, 0.00638147, 0.00643246, 0.00647446, 0.00650736, 0.00657329, 0.00672726, 0.00696656, 0.00729864, 0.00780228, 0.00867182, 0.0101558, 0.0127157, 0.0169938, 0.0235456, 0.0326658, 0.0441297, 0.0563118, 0.0674176, 0.0759388, 0.0808, 0.0817704, 0.0789457, 0.0727943, 0.0654846, 0.0583487, 0.0521552, 0.0465564, 0.0412184, 0.0360471, 0.0314152, 0.0271806, 0.0232988, 0.01977, 0.0166254, 0.0139549, 0.0118192, 0.0101028, 0.00882978, 0.00796776, 0.00735354, 0.00693706, 0.00665857, 0.00645672, 0.00627792, 0.00610396, 0.00593701, 0.00581406, 0.00570251, 0.00558171, 0.00546818, 0.00537816, 0.00531163, 0.0052526, 0.00523502, 0.00527593, 0.00539049, 0.00561821, 0.00595457, 0.00638215, 0.00682614, 0.00753044, 0.0087669, 0.0109011, 0.0135159, 0.0166926, 0.0208447, 0.026987, 0.0362755, 0.0517115, 0.0825886, 0.132722, 0.198748, 0.265597, 0.331419, 0.393605, 0.449351, 0.477441, 0.478594, 0.458413, 0.402948, 0.318018, 0.221407, 0.156953, 0.115089, 0.0874153, 0.0654707, 0.0490357, 0.0369252, 0.0280961, 0.0220285, 0.0180577, 0.0155241, 0.0138026, 0.0126067, 0.011716, 0.0109202, 0.0102418, 0.00970583, 0.00935931, 0.00912434, 0.0088851, 0.00852766, 0.00808475, 0.00775659, 0.00844021, 0.0130023, 0.0229721, 0.0383718, 0.0576145, 0.0754039, 0.0876168, 0.0908435, 0.0909978, 0.0903424, 0.0903278, 0.094064, 0.101247, 0.109992, 0.116178, 0.115652, 0.107477, 0.0936195, 0.0885061, 0.0942072, 0.104555, 0.105904, 0.0968803, 0.0823029, 0.0766299, 0.0809663, 0.0914862, 0.0973092, 0.0950661, 0.0860215, 0.0770014, 0.0731015, 0.0752519, 0.0818546, 0.0962943, 0.146058, 0.263405, 0.473037, 0.690394, 0.819319, 0.755458, 0.585849, 0.394904, 0.280648, 0.201896, 0.148182, 0.117404, 0.103727, 0.100568, 0.101554, 0.104127, 0.10712, 0.109654, 0.11038, 0.109519, 0.109245, 0.114574, 0.128488, 0.142008, 0.138066, 0.106522, 0.0655339, 0.0389548, 0.0279176, 0.0245099, 0.0218601, 0.0196932, 0.0181528, 0.0172654, 0.016936, 0.0169647, 0.0171274, 0.0171795, 0.0169118, 0.0168327, 0.018085, 0.0244248, 0.0341538, 0.043175, 0.0419691, 0.0354445, 0.0278049, 0.0227735, 0.0195953, 0.0181087, 0.0180839, 0.0168797, 0.0156443, 0.0167226, 0.022673, 0.0275217, 0.0264606, 0.0201273, 0.0146513, 0.012653, 0.0121537, 0.0118378, 0.0113069, 0.0108158, 0.0103645, 0.00985972, 0.00922732, 0.00872345, 0.00837498, 0.00821261, 0.00836132, 0.0088858, 0.00964549, 0.0102391, 0.0102214, 0.00976788, 0.00950895, 0.0102265, 0.0137713, 0.021211, 0.0281476, 0.0284165, 0.0202421, 0.0129764, 0.0102725, 0.0129378, 0.0191175, 0.0188171, 0.0125872, 0.00721349, 0.00480704, 0.00453233, 0.00468371, 0.00518364, 0.00615391, 0.00806318, 0.0115964, 0.0197995, 0.0350279, 0.060395, 0.0795071, 0.08642, 0.0805182, 0.0634482, 0.0549771, 0.0665339, 0.0514989, 0.0270512, 0.00926436, 0.00480734, 0.00437486, 0.00399594, 0.00367752, 0.00346469, 0.00328764, 0.00309877, 0.00291118, 0.00276829, 0.00270272, 0.0026986, 0.00267705, 0.00258865, 0.00241386, 0.00226092, 0.0021328, 0.0019662, 0.00179029, 0.00162668, 0.00150506, 0.00147212, 0.00173204, 0.00221798, 0.00207786, 0.00201693, 0.00245031, 0.0036384, 0.00370847, 0.0027764, 0.00187333, 0.00188841, 0.00200065, 0.00152354, 0.00148212, 0.00197817, 0.00260951, 0.00204938, 0.00133427, 0.000838495, 0.000644707, 0.0005945, 0.000603042, 0.00060123, 0.000514625, 0.000410942, 0.00052017, 0.00146989, 0.00289101, 0.00365988, 0.0019337, 0.00080716, 0.000548337, 0.000559296, 0.000568365, 0.000681038, 0.00104208, 0.0019273, 0.00210587, 0.00144819, 0.000869988, 0.00053095, 0.000407784, 0.000363481, 0.000361718, 0.000366522, 0.000356158, 0.000331072, 0.000312055, 0.000299692, 0.000272847, 0.000263149, 0.000272197, 0.000287541, 0.000278688, 0.000260973, 0.000256897, 0.000257225, 0.000532516, 0.00102435, 0.0013504, 0.00110625, 0.000612481, 0.000434076, 0.000652295, 0.00134181, 0.00221847, 0.00214265, 0.00163755, 0.00113387, 0.00105004, 0.000890611, 0.00064895, 0.000569913, 0.00140249, 0.00329186, 0.00543561, 0.00524877, 0.00350003, 0.00139925, 0.000555806, 0.000360257, 0.000412066, 0.000423176, 0.000542035, 0.000637841, 0.000653825, 0.000628143, 0.000544341, 0.000540946, 0.000766199, 0.000981653, 0.00101835, 0.000826031, 0.000569767, 0.0004225, 0.000380908, 0.000309821, 0.000303815, 0.000327059, 0.000333597, 0.000341123, 0.000374866, 0.000548663, 0.00109492, 0.00192494, 0.00272268, 0.00308479, 0.00277164, 0.00201206, 0.00115398, 0.000696301, 0.000497432, 0.000488224, 0.000599971, 0.000802303, 0.000982537, 0.00104182, 0.000927483, 0.000735265, 0.000543921, 0.000419687, 0.000346326, 0.000324616, 0.000346354, 0.000363499, 0.00044946, 0.000565769, 0.000562429, 0.000549594, 0.000539605, 0.00051317, 0.000411846, 0.000359325, 0.000364843, 0.000296208, 0.00026059, 0.000259214, 0.000262627, 0.000248025, 0.000233153, 0.000232554, 0.000254914, 0.000249411, 0.000235103, 0.00023899, 0.000207425, 0.000184783, 0.000194758, 0.000230972, 0.000238579, 0.000230943, 0.000229019, 0.000176617, 0.000174311, 0.00023183, 0.000255973, 0.000236236, 0.000218168, 0.000244765, 0.00029463, 0.000268657, 0.000196664, 0.000214948, 0.000237135, 0.000261861, 0.00028776, 0.000268407, 0.000237294, 0.000218117, 0.000229125, 0.00026234, 0.000438707, 0.000789743, 0.00116753, 0.00131317, 0.001356, 0.00152342, 0.00157781, 0.00149233, 0.00125623, 0.000867777, 0.000643304];

	var en = encodeSPD(fl);
	console.log(en);
	console.log(en.length, "bytes", fl.data.length, "elements");
	var de = decodeSPD(en);
	console.log(de);

	console.log("relerr", fl.err(de));

</script>

</body>
</html>
